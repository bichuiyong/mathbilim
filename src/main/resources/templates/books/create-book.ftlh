<#import "../layout.ftlh" as main>
<#import "/spring.ftl" as spring/>

<@main.layout>
    <div class="container my-5">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0">Create New Book</h3>
            </div>
            <div class="card-body">
                <form action="/books/create" method="post" enctype="multipart/form-data">
                    <#if _csrf??>
                        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                    </#if>

                    <div class="mb-3">
                        <label for="name" class="form-label">Book Title</label>
                        <@spring.formInput "book.name" 'class="form-control" id="name" placeholder="Enter book title"'/>
                        <@spring.showErrors '<br>',"text-danger small"/>
                    </div>

                    <div class="mb-3">
                        <label for="attachments" class="form-label">Attachments</label>
                        <input type="file" class="form-control" id="attachments" name="attachments" multiple
                               accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.zip,.rar,.7z,.jpg,.jpeg,.png,.gif,.bmp,.svg,.webp,.mp3,.wav,.flac,.mp4,.avi,.mkv,.mov">
                        <div class="form-text">
                            ðŸ“Ž Supported files: documents, images, archives, audio, video<br>
                            ðŸ’¡ Images can be inserted via editor or attached as files
                        </div>
                    </div>

                    <div class="mb-3">
                        <#assign categoryOptions = {}>
                        <#list categories as category>
                            <#assign categoryOptions = categoryOptions + {category.id?string: category.translations[0].translation}>
                        </#list>

                        <label for="category" class="form-label">Category</label>
                        <@spring.formSingleSelect
                        "book.category.id",
                        categoryOptions,
                        'class="form-select" id="category"'/>
                        <@spring.showErrors '<br>',"text-danger small"/>
                    </div>

                    <button type="submit" class="btn btn-success w-100">Create Book</button>
                </form>
            </div>
        </div>
    </div>

</@main.layout>